{
    "settings": {
        "style": {
            "background_class": ""
        },
        "theme": "redmond",
        "sizex": "440",
        "sizey": "650",
        "hideDescription": false,
        "gridSize": "",
        "useBackground": false,
        "snapType": null
    },
    "widgets": {
        "e00001": {
            "tpl": "tplHtml",
            "data": {
                "visibility-cond": "==",
                "visibility-val": 1,
                "refreshInterval": "0",
                "html": "You can install more widget-sets and icon-sets (over 20)",
                "name": "Comment"
            },
            "style": {
                "left": "50%",
                "top": "calc(100% - 50px)",
                "width": "50%",
                "height": "42px",
                "color": "#ffffff",
                "font-family": "Arial, sans-serif"
            },
            "widgetSet": "basic"
        },
        "e00002": {
            "tpl": "tplJquiIconDialog",
            "data": {
                "g_fixed": false,
                "g_visibility": true,
                "g_css_font_text": true,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html_dialog": "<style>\n    * {\n      -webkit-box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      box-sizing: border-box;\n    }\n    \n    input[type=range][orient=vertical] {\n        writing-mode: vertical-lr;\n        direction: rtl;\n        width: 16px;\n        height: 100px;\n        vertical-align: bottom;\n    }\n    \n    body {\n      font-family: sans-serif;\n      padding: 40px;\n    }\n</style>\n\n<script>\n    let temp = 0;\n    \n    servConn.getStates(window.schFBHThermPath + 'ManualModeSetpoint', (error, states) => {\n        temp = states[window.schFBHThermPath + 'ManualModeSetpoint'].val;\n        if(temp==0){\n            temp = 19;\n        }\n        \n        let tempSlider = $(\"#diagTempSlider\");\n        let tempValue = $('#tempValue');\n    \n        tempSlider.val(temp);\n        tempValue.html(temp);\n        \n        tempSlider.on('input', function(){\n            tempValue.html(this.value);\n            temp=this.value;\n        });\n    });\n\n    function closeManualDialog(){\n        vis.setValue(window.schFBHThermPath + 'ManualModeSetpoint', temp);\n        showHourglassModal(window.schFBHUpdateTimeout);\n        updateAfterUserInteraction();\n        document.querySelector('.ui-dialog-titlebar-close').click();\n    }\n</script>\n<table width=\"100%\" style=\"text-align: center;\">\n\t<tr>\n\t   <td>\n\t     <span style=\"font-size: small;\">gew√ºnschte Temperatur</span>\n\t   </td>\n\t</tr>\n\t<tr>\n\t    <td style=\"vertical-align:middle;\">\n\t        <span id=\"tempValue\" class=\"range-value\"></span>\n\t    </td>\n\t</tr>\n\t<tr>\n    \t<td>\n            <div class=\"range-slider\" width=\"100%\">\n                <input id=\"diagTempSlider\" class=\"input-range\" orient=\"vertical\" writing-mode=\"vertical-lr\" direction=\"rtl\" value=\"0\" type=\"range\" step=\"0.5\" min=\"5\" max=\"40\">\n            </div>\n    \t</td>\n\t</tr>\n</table>\n<span>&nbsp;</span>\n<table width=\"100%\" style=\"text-align: center;\">\n    <tr>\n        <td width=\"25%\">\n            &nbsp;\n        </td>\n    \t<td style=\"height: 30px\">\n            <div class=\"vis-widget ui-widget ui-button ui-corner-all ui-state-default  vis-tpl-jqui-Icon - Dialog\" style=\"width: 110px; height: 30px; cursor: pointer; font-size: small;\" onClick=\"closeManualDialog()\">\n                <div class=\"vis-widget-body\">\n                    <img style=\"vertical-align: middle; height: 100%;\" alt=\"\">Manuell\n                </div>\n            </div>\n\t\t<td width=\"25%\">\n            &nbsp;\n        </td>\n\t</tr>\n</table>",
                "text": "Manuell",
                "modal": true,
                "dialog_width": "300",
                "dialog_height": "320",
                "title": "manueller Modus?",
                "persistent": true,
                "visibility-cond": "!=",
                "visibility-val": "3",
                "visibility-groups-action": "hide",
                "visibility-oid": "schlueter_fbh.0.77093.Thermostats.1191137.RegulationMode"
            },
            "style": {
                "left": "7px",
                "top": "289px",
                "width": "101px",
                "height": "24px",
                "font-size": "small"
            },
            "widgetSet": "jqui"
        },
        "e00003": {
            "tpl": "tplJquiIconDialog",
            "data": {
                "g_fixed": false,
                "g_visibility": true,
                "g_css_font_text": true,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html_dialog": "<style>\n    * {\n      -webkit-box-sizing: border-box;\n      -moz-box-sizing: border-box;\n      box-sizing: border-box;\n    }\n    \n    input[type=range][orient=vertical] {\n        writing-mode: vertical-lr;\n        direction: rtl;\n        width: 16px;\n        height: 100px;\n        vertical-align: bottom;\n    }\n    \n    body {\n      font-family: sans-serif;\n      padding: 40px;\n    }\n</style>\n\n<script>\n    let minutes = 0;\n    let min = 0;\n    \n    servConn.getStates(window.schFBHThermPath + 'BoostTimeInMinutes', (error, states) => {\n        minutes = states[window.schFBHThermPath + 'BoostTimeInMinutes'].val;\n\n        let timeSlider = $(\"#diagTimeSlider\");\n        let timeValue = $('#timeValue');\n    \n        timeSlider.val(minutes);\n        timeValue.html(minutes);\n        \n        timeSlider.on('input', function(){\n            timeValue.html(this.value);\n            min=this.value;\n        }); \n    });\n\n    function closeBoostDialog(){\n       let mode = \"8,\" + min + \",\" + 40; //boostMode Degree always 40\n       vis.setValue(window.schFBHThermPath + 'setRegulationMode', mode);\n       showHourglassModal(window.schFBHUpdateTimeout);\n       updateAfterUserInteraction();\n       document.querySelector('.ui-dialog-titlebar-close').click();\n    }\n</script>\n<table width=\"100%\">\n\t<tr>\n\t   <td width=\"50%\">\n\t     <span style=\"font-size: small;\">Boostzeit in Minuten</span>\n\t   </td>\n\t   <td width=\"50%\">\n\t     <span style=\"font-size: small;\">Boosttemperatur</span>\n\t   </td>\t   \n\t</tr>\n\t<tr>\n\t    <td  style=\"vertical-align:middle;\">\n\t        <span id=\"timeValue\" class=\"range-value\"></span>\n\t    </td>\n\t    <td style=\"vertical-align:middle;\">\n\t        <span id=\"tempValue\" class=\"range-value\">40¬∞</span>\n\t    </td>\n\t</tr>\n\t<tr>\n    \t<td>\n            <div class=\"range-slider\" width=\"100%\">\n                <input id=\"diagTimeSlider\" class=\"input-range\" orient=\"vertical\" writing-mode=\"vertical-lr\" direction=\"rtl\" value=\"0\" type=\"range\" step=\"1\" min=\"1\" max=\"60\">\n            </div>\n    \t</td>\n\t\t<td style=\"vertical-align:middle;font-size:0.75em;\">\n            (Temperatur nicht √§nderbar/\n            temperature not changeable)\n\t\t</td>\n\t</tr>\n</table>\n<span>&nbsp;</span>\n<table width=\"100%\" style=\"text-align: center;\">\n    <tr>\n        <td width=\"25%\">\n            &nbsp;\n        </td>\n    \t<td style=\"height: 30px\">\n            <div class=\"vis-widget ui-widget ui-button ui-corner-all ui-state-default  vis-tpl-jqui-Icon - Dialog\" style=\"width: 110px; height: 30px; cursor: pointer; font-size: small;\" onClick=\"closeBoostDialog()\">\n                <div class=\"vis-widget-body\">\n                    <img style=\"vertical-align: middle; height: 100%;\" alt=\"\">Start Boost\n                </div>\n            </div>\n\t\t<td width=\"25%\">\n            &nbsp;\n        </td>\n\t</tr>\n</table>",
                "text": "Boost",
                "modal": true,
                "dialog_width": "300",
                "dialog_height": "320",
                "title": "Boostmodus?",
                "persistent": true,
                "visibility-cond": "!=",
                "visibility-val": "8",
                "visibility-groups-action": "hide",
                "visibility-oid": "schlueter_fbh.0.77093.Thermostats.1191137.RegulationMode"
            },
            "style": {
                "left": "140px",
                "top": "323px",
                "width": "101px",
                "height": "24px",
                "font-size": "small"
            },
            "widgetSet": "jqui"
        },
        "e00004": {
            "tpl": "tplJquiIconDialog",
            "data": {
                "g_fixed": false,
                "g_visibility": true,
                "g_css_font_text": true,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html_dialog": "<style>\n* {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\ninput[type=range][orient=vertical] {\n    writing-mode: vertical-lr;\n    direction: rtl;\n    width: 16px;\n    height: 100px;\n    vertical-align: bottom;\n}\n\nbody {\n  font-family: sans-serif;\n  padding: 40px;\n}\n</style>\n<script>\n    var timeSlider = $(\"#diagTimeSlider\"),\n        timeValue = $('#timeValue'),\n        tempSlider = $(\"#diagTempSlider\"),\n        tempValue = $('#tempValue');\n    \n    degree = 0;\n    min = 0;\n    \n    timeValue.html(timeSlider.attr('value'));\n    tempValue.html(tempSlider.attr('value'));\n    \n    timeSlider.on('input', function(){\n        timeValue.html(this.value);\n        min=this.value;\n    }); \n    tempSlider.on('input', function(){\n        tempValue.html(this.value);\n        degree=this.value;\n    });\n\n    function closeComfortDialog(){\n        let mode = \"2,\" + min + \",\" + degree;\n        vis.setValue(window.schFBHThermPath + 'setRegulationMode', mode);\n        showHourglassModal(window.schFBHUpdateTimeout);\n        updateAfterUserInteraction();\n        document.querySelector('.ui-dialog-titlebar-close').click();       \n    }\n</script>\n<table width=\"100%\" style=\"text-align: center;\">\n\t<tr>\n\t   <td width=\"50%\">\n\t     <span style=\"font-size: small;\">Comfortzeit in Minuten</span>\n\t   </td>\n\t   <td width=\"50%\">\n\t     <span style=\"font-size: small;\">Comforttemperatur</span>\n\t   </td>\t   \n\t</tr>\n\t<tr>\n\t    <td  style=\"vertical-align:middle;\">\n\t        <span id=\"timeValue\" class=\"range-value\"></span>\n\t    </td>\n\t    <td style=\"vertical-align:middle;\">\n\t        <span id=\"tempValue\" class=\"range-value\"></span>\n\t    </td>\n\t</tr>\n\t<tr>\n    \t<td>\n            <div class=\"range-slider\" width=\"100%\">\n                <input id=\"diagTimeSlider\" class=\"input-range\" orient=\"vertical\" writing-mode=\"vertical-lr\" direction=\"rtl\" value=\"{schlueter-fbh.0.77093.Thermostats.1191137.ComfortTimeInMinutes}\" type=\"range\" step=\"1\" min=\"1\" max=\"60\">\n            </div>\n    \t</td>\n\t\t<td style=\"vertical-align:middle;\">\n            <div class=\"range-slider\" width=\"100%\">\n                <input id=\"diagTempSlider\" class=\"input-range\" orient=\"vertical\" writing-mode=\"vertical-lr\" direction=\"rtl\" value=\"{schlueter-fbh.0.77093.Thermostats.1191137.ComfortSetpoint}\" type=\"range\" step=\"1\" min=\"5\" max=\"40\">\n            </div>\n\t\t</td>\n\t</tr>\n</table>\n<span>&nbsp;</span>\n<table width=\"100%\">\n    <tr>\n        <td width=\"25%\">\n            &nbsp;\n        </td>\n    \t<td style=\"height: 30px\">\n            <div class=\"vis-widget ui-widget ui-button ui-corner-all ui-state-default  vis-tpl-jqui-Icon - Dialog\" style=\"width: 110px; height: 30px; cursor: pointer; font-size: small;\" onClick=\"closeComfortDialog()\">\n                <div class=\"vis-widget-body\">\n                    <img style=\"vertical-align: middle; height: 100%;\" alt=\"\">Start Comfort\n                </div>\n            </div>\n\t\t<td width=\"25%\">\n            &nbsp;\n        </td>\n\t</tr>\n</table>",
                "text": "Comfort",
                "modal": true,
                "dialog_width": "300",
                "dialog_height": "320",
                "title": "Comfortmodus?",
                "persistent": true,
                "visibility-cond": "!=",
                "visibility-val": "2",
                "visibility-groups-action": "hide",
                "visibility-oid": "schlueter_fbh.0.77093.Thermostats.1191137.RegulationMode"
            },
            "style": {
                "left": "140px",
                "top": "288px",
                "width": "101px",
                "height": "24px",
                "font-size": "small"
            },
            "widgetSet": "jqui"
        },
        "e00005": {
            "tpl": "tplHtml",
            "data": {
                "g_fixed": false,
                "g_visibility": true,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "refreshInterval": "0",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html": "<div>\n    <textarea id=\"queryInput\" rows=\"10\" cols=\"50\" placeholder=\"\"></textarea>\n    <button id=\"saveQueryButton\">Query</button>\n</div>\n\n<script>\n\n    const defQuery = {\n      APIKEY: \"f219aab4-9ac0-4343-8422-b72203e2fac9\",\n      ThermostatID: \"1191137\",\n      DateTime: \"2024-11-17T12:00:00\",\n      History: 1,\n      ViewType: 1\n    }\n\n    const stateId = \"schlueter-fbh.0.77093.Thermostats.1191137.energyLastCallQuery\";\n    // Pre-fill the textarea with the current state value\n    document.getElementById('queryInput').value = JSON.stringify(defQuery, null, 2);\n\n    // Save the text to the state when the button is clicked\n    document.getElementById('saveQueryButton').addEventListener('click', () => {\n        const textValue = document.getElementById('queryInput').value;\n        vis.setValue(stateId, textValue);\n        //alert(\"Text saved!\");\n    });\n    \n    \n    /*\n    // Update the textarea when the state value changes\n    if (typeof vis !== 'undefined') {\n        vis.binds.basic.helper.subscribe(stateId, (obj) => {\n            document.getElementById('queryInput').value = obj.val;\n        });\n    }\n    */\n</script>"
            },
            "style": {
                "left": "10px",
                "top": "438px",
                "width": "401px",
                "height": "188px"
            },
            "widgetSet": "basic"
        },
        "e00006": {
            "tpl": "tplVis-materialdesign-Card",
            "data": {
                "g_fixed": false,
                "g_visibility": false,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "listItemDataMethod": "inputPerEditor",
                "cardLayout": "Basic",
                "cardStyle": "default",
                "showScrollbar": "true",
                "showTitle": "true",
                "titleLayout": "#mdwTheme:vis-materialdesign.0.fontSizes.card.title",
                "titleFontFamily": "#mdwTheme:vis-materialdesign.0.fonts.card.title",
                "showSubTitle": "true",
                "subtitleLayout": "#mdwTheme:vis-materialdesign.0.fontSizes.card.subTitle",
                "subTitleFontFamily": "#mdwTheme:vis-materialdesign.0.fonts.card.subTitle",
                "showText": "true",
                "textFontSize": "#mdwTheme:vis-materialdesign.0.fontSizes.card.text",
                "textFontFamily": "#mdwTheme:vis-materialdesign.0.fonts.card.text",
                "refresh_oid_delay": "100",
                "refresh_animation_duration": "150",
                "colorBackground": "#mdwTheme:vis-materialdesign.0.colors.card.background",
                "colorTitleSectionBackground": "#mdwTheme:vis-materialdesign.0.colors.card.background_title",
                "colorTextSectionBackground": "#mdwTheme:vis-materialdesign.0.colors.card.background_body",
                "colorTitle": "#mdwTheme:vis-materialdesign.0.colors.card.title",
                "colorSubtitle": "#mdwTheme:vis-materialdesign.0.colors.card.subTitle",
                "colorBody": "#mdwTheme:vis-materialdesign.0.colors.card.text",
                "clickType": "none",
                "controlType": "link",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html": "<style>\n    .thermNameLabel {\n        font-size: 1.1em;\n        color:#4b2561;\n    }\n\n    .thermNameText {\n        font-size: 1.1em;\n        color:#4b2561;\n    }\n\n    .RegulationMode {\n        font-size: 1.1em;\n        color:#4b2561;\n    }    \n    \n    .Heating {\n        width: 30%;\n    }\n    \n</style>\n<script>\n    const idPrefixGroup = window.schFBHGroupPath;\n    const idPrefixTherm = window.schFBHThermPath; \n    let thermValues = {\n        \"GroupName\": 'GroupName',\n        \"ThermostatName\": 'ThermostatName',\n        \"RoomTemperature\": 0,\n        \"FloorTemperature\": 0,            \n        \"RegulationMode\": -1,\n        \"ManualModeSetpoint\": 0,\n        \"ComfortTimeInMinutes\": 0,\n        \"ComfortEndTime\": 'ComfortEndTime',\n        \"ComfortSetpoint\": 0,\n        \"BoostTimeInMinutes\": 0,\n        \"BoostEndTime\": 'BoostEndTime',\n        \"Heating\": false\n    };\n    \n    let objIDs = [];\n    let currentMode = -1;\n    \n    Object.keys(thermValues).forEach((key) => {\n        if(key == 'GroupName'){\n            objIDs.push(idPrefixGroup + key);\n        } else {\n            objIDs.push(idPrefixTherm + key);\n        } \n    });\n    \n    //console.log(objIDs);\n    \n    function getFBHStates(){\n        console.log('getFBHStates started');\n        vis.conn.getStates(objIDs, (error, states) => {\n            for(var i=0; i < objIDs.length; i++){\n                //console.log(i + ' - ' + objIDs[i] + ' - ' + states[objIDs[i]].val);\n                \n               // Set initial value\n                if (states[objIDs[i]] !== undefined) {\n                    setValue(objIDs[i].split('.').pop(), states[objIDs[i]].val);\n                }\n                \n                \n                // Subscribe to state changes - I cannot get that to work so i do a setinterval\n                vis.conn.subscribe(objIDs[i]);\n                vis.states.bind(objIDs[i], (e, obj) => {\n                    console.log('subscribe');\n                    if (obj && obj.val !== undefined) {\n                        console.log('subscribe');\n                        setValue(objIDs[i].split('.').pop(), obj.val);\n                    }\n                });\n            };\n        });\n    }\n    \n\n    function endTimeValue(type, val){\n        if(currentMode == \"2\" && type == \"ComfortEndTime\"){\n            return val.slice(11);\n        } else if(currentMode == \"8\" && type == \"BoostEndTime\"){\n            return val.slice(11);\n        } else {\n            return '';\n        }\n    }\n\n    function modeEnum(mode){\n        let res = 'undefined';\n        switch(mode){\n            case 1:\n                res = 'Zeitplan';\n                break;\n            case 2:\n                res = 'Comfort';\n                break;\n            case 3:\n                res = 'Manuell';\n                break;\n            case 8:\n                res = 'Boost';\n                break;\n            case 9:\n                res = 'Eco';\n                break;\n        }\n        return res;\n    }\n    \n    function setValue(state, val){\n        //console.log(state + ' - ' + val);\n        if(state == 'RegulationMode'){\n            currentMode = val;\n            $(\".\" + state).html(modeEnum(val));\n        } else if(state == 'RoomTemperature' ||state == 'FloorTemperature' || state == 'ComfortSetpoint' || state == 'ManualModeSetpoint'){\n            $(\".\" + state).html(val + '¬∞');\n        } else if(state == 'ComfortEndTime' || state == 'BoostEndTime'){\n            $(\".\" + state).html(endTimeValue(state, val));\n        } else {\n            $(\".\" + state).html(val);\n        }\n    }\n        \n    function updateAfterUserInteraction(){\n        setTimeout(() => {\n          getFBHStates();\n        }, window.schFBHUpdateTimeout);\n    }\n    \n    getFBHStates(); //\"start widget\" one time manually\n    setInterval(getFBHStates, 60000); //update widget every 30 seconds\n    \n\n</script>\n\n<table width=\"100%\">\n    <tr>\n        <td class=\"thermNameLabel\">Gruppe/Raum:</td>\n        <td class=\"thermNameText GroupName\"></td>\n        <td rowspan=\"4\" class=\"Heating\"></td>\n    </tr>\n    <tr>\n        <td class=\"thermNameLabel\">Tehrmost.:</td>\n        <td class=\"thermNameText ThermostatName\"></td>\n    </tr>\n    <tr>\n        <td colspan=\"2\">&nbsp;</td>\n    </tr>\n    <tr>\n        <td class=\"thermNameLabel\">akt. Modus:</td>\n        <td class=\"RegulationMode\"></td>\n    </tr>        \n</table>\n<p></p>\n<table width=\"100%\">\n    <tr>\n        <td class=\"txtLabel\">Raum-Temp.:</td>\n        <td class=\"txtText RoomTemperature\"></td>\n        <td class=\"tdEmpty\">&nbsp;</td>\n        <td class=\"txtLabel\">Boden-Temp.:</td>\n        <td class=\"txtText FloorTemperature\"></td>\n    </tr>\n    <tr>\n        <td class=\"txtLabel\">Manuell-Temp.:</td>\n        <td class=\"txtText ManualModeSetpoint\"></td>\n        <td class=\"tdEmpty\">&nbsp;</td>\n        <td class=\"txtLabel\">Comfort-Temp.:</td>\n        <td class=\"txtText ComfortSetpoint\"></td>\n    </tr>\n    <tr>\n        <td colspan=\"5\">&nbsp;</td>\n    </tr>\n    <tr>\n        <td class=\"txtLabel\">Boost-Zeit (m):</td>\n        <td class=\"txtText BoostTimeInMinutes\"></td>\n        <td class=\"tdEmpty\">&nbsp;</td>\n        <td class=\"txtLabel\">Endet:</td>\n        <td class=\"txtText BoostEndTime\"></td>\n    </tr>\n    <tr>\n        <td class=\"txtLabel\">Comfort-Zeit (m):</td>\n        <td class=\"txtText ComfortTimeInMinutes\"></td>\n        <td class=\"tdEmpty\">&nbsp;</td>\n        <td class=\"txtLabel\">Endet:</td>\n        <td class=\"txtText ComfortEndTime\"></td>\n    </tr>        \n</table>"
            },
            "style": {
                "left": "6px",
                "top": "2px",
                "width": "426px",
                "height": "267px"
            },
            "widgetSet": "materialdesign"
        },
        "e00007": {
            "tpl": "tplVis-materialdesign-Vuetify-Dialog-View",
            "data": {
                "g_fixed": true,
                "g_visibility": false,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "showDialogMethod": "button",
                "fullscreenResolutionLower": "368",
                "vibrateOnMobilDevices": "50",
                "buttonStyle": "raised",
                "mdwButtonPrimaryColor": "#mdwTheme:vis-materialdesign.0.colors.button.default.primary",
                "mdwButtonSecondaryColor": "#mdwTheme:vis-materialdesign.0.colors.button.default.secondary",
                "textFontFamily": "#mdwTheme:vis-materialdesign.0.fonts.button.default.text",
                "textFontSize": "#mdwTheme:vis-materialdesign.0.fontSizes.button.default.text",
                "imageColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.button_icon",
                "iconPosition": "left",
                "closingClickOutside": "true",
                "backgroundColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.background",
                "headerBackgroundColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.header_background",
                "footerBackgroundColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.footer_background",
                "dividerColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.divider",
                "overlayColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.overlay",
                "showTitle": false,
                "titleFontSize": "#mdwTheme:vis-materialdesign.0.fontSizes.dialog.title",
                "titleFont": "#mdwTheme:vis-materialdesign.0.fonts.dialog.title",
                "titleColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.header_text",
                "buttonPosition": "flex-end",
                "buttonSize": "medium",
                "buttonFont": "#mdwTheme:vis-materialdesign.0.fonts.dialog.button",
                "buttonFontColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_text",
                "pressColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_press",
                "fullscreenCloseIconColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_icon",
                "fullscreenCloseIconPressColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_fullscreen_press",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "contains_view": "badFBHSchedule",
                "buttontext": "Schedule",
                "dialogMaxWidth": "500",
                "name": "schedView",
                "headerHeight": "-2",
                "viewDistanceToBorder": "5"
            },
            "style": {
                "left": "283px",
                "top": "288px"
            },
            "widgetSet": "materialdesign"
        },
        "e00008": {
            "tpl": "tplVis-materialdesign-Vuetify-Dialog-View",
            "data": {
                "g_fixed": false,
                "g_visibility": false,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "showDialogMethod": "button",
                "fullscreenResolutionLower": "360",
                "vibrateOnMobilDevices": "50",
                "buttonStyle": "raised",
                "mdwButtonPrimaryColor": "#mdwTheme:vis-materialdesign.0.colors.button.default.primary",
                "mdwButtonSecondaryColor": "#mdwTheme:vis-materialdesign.0.colors.button.default.secondary",
                "textFontFamily": "#mdwTheme:vis-materialdesign.0.fonts.button.default.text",
                "textFontSize": "#mdwTheme:vis-materialdesign.0.fontSizes.button.default.text",
                "imageColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.button_icon",
                "iconPosition": "left",
                "closingClickOutside": "true",
                "backgroundColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.background",
                "headerBackgroundColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.header_background",
                "footerBackgroundColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.footer_background",
                "dividerColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.divider",
                "overlayColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.overlay",
                "showTitle": false,
                "titleFontSize": "",
                "titleFont": "#mdwTheme:vis-materialdesign.0.fonts.dialog.title",
                "titleColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.header_text",
                "buttonPosition": "flex-end",
                "buttonSize": "medium",
                "buttonFont": "#mdwTheme:vis-materialdesign.0.fonts.dialog.button",
                "buttonFontColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_text",
                "pressColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_press",
                "fullscreenCloseIconColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_icon",
                "fullscreenCloseIconPressColor": "#mdwTheme:vis-materialdesign.0.colors.dialog.close_button_fullscreen_press",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "contains_view": "badFBHEnergy",
                "buttonText": "",
                "buttontext": "Energy",
                "dialogMaxWidth": "500",
                "viewDistanceToBorder": "5"
            },
            "style": {
                "left": "283px",
                "top": "323px"
            },
            "widgetSet": "materialdesign"
        },
        "e00009": {
            "tpl": "tplHtml",
            "data": {
                "g_fixed": false,
                "g_visibility": false,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "refreshInterval": "0",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html": "<style>\n    /* Modal styling */\n    .modal {\n        display: none; /* Hidden by default */\n        position: fixed;\n        z-index: 1000; /* Above other content */\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */\n        text-align: center;\n        align-items: center;\n        justify-content: center;\n        display: flex;\n    }\n    \n    /* Modal content */\n    .modal-content {\n        background-color: #fff;\n        padding: 20px;\n        border-radius: 8px;\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n        display: inline-block;\n        text-align: center;\n    }\n    \n    /* Hourglass styling */\n    .hourglass {\n        width: 50px;\n        height: 50px;\n        border: 4px solid #ccc;\n        border-top: 4px solid #000;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n        margin: 20px auto;\n    }\n    \n    /* Hourglass spin animation */\n    @keyframes spin {\n        from {\n            transform: rotate(0deg);\n        }\n        to {\n            transform: rotate(360deg);\n        }\n    }\n</style>\n<script>\n     function showHourglassModal(duration) {\n        const modal = document.getElementById(\"hourglassModal\");\n        const message = document.getElementById(\"modalMessage\");\n    \n        // Show the modal\n        modal.style.display = \"flex\";\n        message.textContent = \"Please wait...\";\n    \n        // Hide the modal after the specified time\n        setTimeout(() => {\n            modal.style.display = \"none\";\n        }, duration); // duration in milliseconds\n    }  \n</script>\n<div id=\"hourglassModal\" class=\"modal\" style=\"display: none;\">\n    <div class=\"modal-content\">\n        <div id=\"hourglass\" class=\"hourglass\"></div>\n        <p id=\"modalMessage\">Please wait...</p>\n    </div>\n</div>"
            },
            "style": {
                "left": "12px",
                "top": "329px",
                "width": "86px",
                "height": "85px"
            },
            "widgetSet": "basic"
        }
    },
    "rerender": false,
    "filterList": []
}

