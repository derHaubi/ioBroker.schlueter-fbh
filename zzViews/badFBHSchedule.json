{
    "settings": {
        "style": {
            "background_class": ""
        },
        "theme": "redmond",
        "sizex": "345",
        "sizey": "590",
        "gridSize": "",
        "useBackground": false,
        "snapType": null
    },
    "widgets": {
        "e00001": {
            "tpl": "tplVis-materialdesign-Table",
            "data": {
                "oid": "schlueter-fbh.0.77093.scheduleJSON",
                "g_fixed": true,
                "g_visibility": false,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "countCols": "2",
                "tableLayout": "standard",
                "showHeader": "true",
                "roundBorder": "true",
                "headerTextSize": "#mdwTheme:vis-materialdesign.0.fontSizes.table.header",
                "headerFontFamily": "#mdwTheme:vis-materialdesign.0.fonts.table.header",
                "colorBackground": "#mdwTheme:vis-materialdesign.0.colors.table.background",
                "colorHeaderRowBackground": "#mdwTheme:vis-materialdesign.0.colors.table.row_header_background",
                "colorHeaderRowText": "#mdwTheme:vis-materialdesign.0.colors.table.row_header_text",
                "colorRowBackground": "#mdwTheme:vis-materialdesign.0.colors.table.row_background",
                "colorRowBackgroundHover": "#mdwTheme:vis-materialdesign.0.colors.table.row_hover",
                "colorRowText": "#mdwTheme:vis-materialdesign.0.colors.table.row_text",
                "borderColor": "#mdwTheme:vis-materialdesign.0.colors.table.border",
                "dividers": "#mdwTheme:vis-materialdesign.0.colors.table.dividers",
                "showColumn0": "true",
                "colType0": "text",
                "textAlign0": "center",
                "colTextSize0": "#mdwTheme:vis-materialdesign.0.fontSizes.table.row",
                "fontFamily0": "#mdwTheme:vis-materialdesign.0.fonts.table.row",
                "showColumn1": "true",
                "colType1": "text",
                "textAlign1": "center",
                "colTextSize1": "#mdwTheme:vis-materialdesign.0.fontSizes.table.row",
                "fontFamily1": "#mdwTheme:vis-materialdesign.0.fonts.table.row",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "name": "scheduleData",
                "label0": "Aktiv",
                "label1": "Zeit",
                "columnWidth1": "-1",
                "showColumn2": "true",
                "colType2": "text",
                "textAlign2": "center",
                "colTextSize2": "#mdwTheme:vis-materialdesign.0.fontSizes.table.row",
                "fontFamily2": "#mdwTheme:vis-materialdesign.0.fonts.table.row",
                "label2": "Temp",
                "padding_right0": "-1",
                "fixedHeader": true,
                "rowHeight": "50"
            },
            "style": {
                "left": "1px",
                "top": "73px",
                "width": "336px",
                "height": "337px"
            },
            "widgetSet": "materialdesign"
        },
        "e00002": {
            "tpl": "tplHtml",
            "data": {
                "g_fixed": false,
                "g_visibility": false,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "refreshInterval": "0",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html": "<style>\n    /* Style the select box */\n    #scheduleDay {\n        width: 200px;\n        padding: 8px 10px;\n        font-size: 16px;\n        color: #333;\n        border: 2px solid #4CAF50;\n        border-radius: 5px;\n        background-color: #f9f9f9;\n        appearance: none; /* Remove default arrow for most browsers */\n        -moz-appearance: none;\n        -webkit-appearance: none;\n        background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 140 140\"><polygon points=\"70,100 40,50 100,50\" style=\"fill:%234CAF50;\"/></svg>');\n        background-repeat: no-repeat;\n        background-position: right 10px center;\n        background-size: 10px;\n        cursor: pointer;\n    }\n\n    /* Style on hover and focus */\n    #scheduleDay:hover {\n        border-color: #2e7d32;\n    }\n\n    #scheduleDay:focus {\n        outline: none;\n        border-color: #1b5e20;\n        box-shadow: 0 0 5px rgba(0, 128, 0, 0.5);\n    }\n</style>\n\n<div>\n    <label for=\"scheduleDay\">Tag:</label>\n    <select id=\"scheduleDay\">\n        <option value=\"0\">Montag</option>\n        <option value=\"1\">Dienstag</option>\n        <option value=\"2\">Mittwoch</option>\n        <option value=\"3\">Donnerstag</option>\n        <option value=\"4\">Freitag</option>\n        <option value=\"5\">Samstag</option>\n        <option value=\"6\">Sonntag</option>\n    </select>\n</div>\n\n\n\n<script>\n    // Select the dropdown element\n    const selectElement = document.getElementById('scheduleDay');\n    let strSched = '';\n    let sched;\n    let dayJSON;\n\n    // Define the function to handle the change event\n    function onSelectChange(event) {\n        const selectedValue = event.target.value;\n        //console.log('Selected Value:', selectedValue);\n        changeTableContent(selectedValue);\n    }\n\n    // Add event listener to the select element for change events\n    selectElement.addEventListener('change', onSelectChange);    \n    \n    servConn.getStates(window.schFBHGroupPath + 'scheduleRAW', (error, states) => {\n        strSched = states[window.schFBHGroupPath + 'scheduleRAW'].val;\n        //console.log('State: ' + strSched);\n        sched = JSON.parse(strSched).Days;\n        \n        const today = new Date();\n        const originalWeekday = today.getDay();\n\n        // Adjust: Monday = 0, ..., Sunday = 6\n        const adjustedWeekday = (originalWeekday === 0) ? 6 : originalWeekday - 1;\n        $('#scheduleDay').val(adjustedWeekday);\n        changeTableContent(adjustedWeekday);\n    });\n    \n    \n    function changeTableContent(dayValue){\n        dayJSON = sched[dayValue].Events;\n        dayJSON = orderForJSONTable(dayJSON);\n        //console.log(JSON.stringify(dayJSON, null, 2));\n        vis.setValue(window.schFBHGroupPath + 'scheduleJSON', JSON.stringify(dayJSON, null, 2))\n    }\n    \n    function orderForJSONTable(data){\n        let res = [];\n        for(var i=0; i<data.length; i++){\n            var active = '';\n            if(data[i].Active && i > 0){\n                active = 'on';\n            } else if(i>0) {\n                active = 'off';\n            }\n            var obj = {};\n            obj.Active = active;\n            obj.Clock = data[i].Clock.substring(0, 5);\n            obj.Temperature = (data[i].Temperature/100).toFixed(2);\n            obj.ScheduleType = data[i].ScheduleType;\n            obj.EventIsOnNextDay = data[i].EventIsOnNextDay;\n            res.push(obj);\n        }\n        return res;\n        \n    }\n\n</script>"
            },
            "style": {
                "left": "1px",
                "top": "19px",
                "width": "338px",
                "height": "52px"
            },
            "widgetSet": "basic"
        },
        "e00003": {
            "tpl": "tplHtml",
            "data": {
                "g_fixed": false,
                "g_visibility": false,
                "g_css_font_text": false,
                "g_css_background": false,
                "g_css_shadow_padding": false,
                "g_css_border": false,
                "g_gestures": false,
                "g_signals": false,
                "g_last_change": false,
                "visibility-cond": "==",
                "visibility-val": 1,
                "visibility-groups-action": "hide",
                "refreshInterval": "0",
                "signals-cond-0": "==",
                "signals-val-0": true,
                "signals-icon-0": "/vis/signals/lowbattery.png",
                "signals-icon-size-0": 0,
                "signals-blink-0": false,
                "signals-horz-0": 0,
                "signals-vert-0": 0,
                "signals-hide-edit-0": false,
                "signals-cond-1": "==",
                "signals-val-1": true,
                "signals-icon-1": "/vis/signals/lowbattery.png",
                "signals-icon-size-1": 0,
                "signals-blink-1": false,
                "signals-horz-1": 0,
                "signals-vert-1": 0,
                "signals-hide-edit-1": false,
                "signals-cond-2": "==",
                "signals-val-2": true,
                "signals-icon-2": "/vis/signals/lowbattery.png",
                "signals-icon-size-2": 0,
                "signals-blink-2": false,
                "signals-horz-2": 0,
                "signals-vert-2": 0,
                "signals-hide-edit-2": false,
                "lc-type": "last-change",
                "lc-is-interval": true,
                "lc-is-moment": false,
                "lc-format": "",
                "lc-position-vert": "top",
                "lc-position-horz": "right",
                "lc-offset-vert": 0,
                "lc-offset-horz": 0,
                "lc-font-size": "12px",
                "lc-font-family": "",
                "lc-font-style": "",
                "lc-bkg-color": "",
                "lc-color": "",
                "lc-border-width": "0",
                "lc-border-style": "",
                "lc-border-color": "",
                "lc-border-radius": 10,
                "lc-zindex": 0,
                "html": "<div id=\"btnSchedule\" class='vis-widget materialdesign-widget materialdesign-button materialdesign-button-html-element'\n\tstyle='width: 144px; height: 27px; position: relative; padding: 0px;'\n\tmdw-type='state_default'\n\tmdw-oid='nothing_selected'\n\tmdw-buttonStyle='raised'\n\tmdw-vibrateOnMobilDevices='50'\n\tmdw-buttontext='Zeitplan aktivieren'\n\tmdw-textFontFamily='#mdwTheme:vis-materialdesign.0.fonts.button.default.text'\n\tmdw-textFontSize='#mdwTheme:vis-materialdesign.0.fontSizes.button.default.text'\n\tmdw-mdwButtonPrimaryColor='#mdwTheme:vis-materialdesign.0.colors.button.default.primary'\n\tmdw-mdwButtonSecondaryColor='#mdwTheme:vis-materialdesign.0.colors.button.default.secondary'\n\tmdw-iconPosition='left'\n\tmdw-autoLockAfter='10'\n\tmdw-lockIconColor='#mdwTheme:vis-materialdesign.0.colors.button.lock_icon'\n\tmdw-lockFilterGrayscale='30'\n></div>\n<script>\n    const btnSched = document.getElementById('btnSchedule');\n\n    // Define the function to handle the change event\n    function onbtnSchedClick(event) {\n        vis.setValue(window.schFBHThermPath + 'setRegulationMode', '1');\n        updateAfterUserInteraction();\n        $( \".materialdesign-dialog-footer-button\" ).click()\n    }\n\n    // Add event listener to the select element for change events\n    btnSched.addEventListener('click', onbtnSchedClick); \n    \n</script>"
            },
            "style": {
                "left": "1px",
                "top": "413px",
                "width": "336px",
                "height": "38px"
            },
            "widgetSet": "basic"
        }
    },
    "name": "badFBHSchedule",
    "filterList": []
}